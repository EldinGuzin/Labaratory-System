<main id="main" class="main">
  <div class="pagetitle">
    <h1>Forum</h1>
    <nav>
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="index.html">Home</a></li>
        <li class="breadcrumb-item active">Forum</li>
      </ol>
    </nav>
  </div><!-- End Page Title -->

  <section class="section" id="forum-content">
  </section>


 <!-- Modal -->
 <div class="modal fade" id="answerModal" tabindex="-1" aria-labelledby="answerModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="answerModalLabel">Enter Answer</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form id="answerForm">
          <div class="mb-3">
            <label for="answerInput" class="form-label">Your Answer</label>
            <textarea class="form-control" id="answerInput" rows="3" required></textarea>
          </div>
          <button type="submit" class="btn btn-primary">Submit</button>
        </form>
      </div>
    </div>
  </div>
</div>


</main>

<script>
  $(document).ready(function() {
    $.ajax({
      url: '../Labaratory-System/live-backend/get_forum_data', 
      method: 'GET',
      success: function(data) {
        var forumContent = $('#forum-content');
        $.each(data, function(index, post) {
          var postDiv = $('<div>').addClass('card mb-3');
          var cardBody = $('<div>').addClass('card-body');
          var title = $('<h5>').addClass('card-title').text(post.title);
          var content = $('<p>').addClass('card-text').text(post.body);
          
          cardBody.append(title, content);
          postDiv.append(cardBody);
          forumContent.append(postDiv);
  
          // Add click event to show modal when card is clicked
          postDiv.click(function() {
            $('#answerModal').modal('show');
          });
        });
      },
      error: function(xhr, status, error) {
        console.error('Error fetching data:', error);
      }
    });
  
    // Submit answer form
    $('#answerForm').submit(function(event) {
      event.preventDefault(); // Prevent form submission
      var answer = $('#answerInput').val();
      console.log('Submitted answer:', answer);
      // Close modal
      $('#answerModal').modal('hide');
    });
  });
</script>

