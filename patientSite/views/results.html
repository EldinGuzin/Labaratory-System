<section class="section d-flex align-items-center" style="height: 100vh;">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-6">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Test Results</h5>

            <table id="test-results-table" class="table table-striped table-lg">
              <thead>
                <tr>
                  <th scope="col">Parameter</th>
                  <th scope="col">Result</th>
                  <th scope="col">Unit</th>
                </tr>
              </thead>
              <tbody>
                <!-- The data goes here, hopefully-->
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  $(document).ready(function() {
    // Fetch test results from the PHP script
    $.getJSON('../live-backend/get_test_results.php', function(data) {
      var tableBody = $('#test-results-table tbody');
      // Loop through the fetched data and populate the table
      $.each(data, function(index, result) {
        // Create a new row for each parameter
        var row = $('<tr>');
        // Add columns for parameter, result, and unit
        row.append($('<td>').text('Name')); 
        row.append($('<td>').text(result.name));
        row.append($('<td>').text(result.surname)); 
        tableBody.append(row);

        row = $('<tr>');
        row.append($('<td>').text('Hemoglobin'));
        row.append($('<td>').text(result.hemoglobin));
        row.append($('<td>').text("g/dL"));
        tableBody.append(row);

        row = $('<tr>');
        row.append($('<td>').text('RBC Count'));
        row.append($('<td>').text(result.rbc_count));
        row.append($('<td>').text("million/uL"));
        tableBody.append(row);


        row = $('<tr>');
        row.append($('<td>').text('pcv'));
        row.append($('<td>').text(result.pcv));
        row.append($('<td>').text("percent"));
        tableBody.append(row);
        
        row = $('<tr>');
        row.append($('<td>').text('mcv'));
        row.append($('<td>').text(result.mcv));
        row.append($('<td>').text("fL"));
        tableBody.append(row);

        row = $('<tr>');
        row.append($('<td>').text('tlc'));
        row.append($('<td>').text(result.tlc));
        row.append($('<td>').text("g/dL"));
        tableBody.append(row);

        row = $('<tr>');
        row.append($('<td>').text('neutrophils'));
        row.append($('<td>').text(result.neutrophils));
        row.append($('<td>').text("percent"));
        tableBody.append(row);

        row = $('<tr>');
        row.append($('<td>').text('lymphocytes'));
        row.append($('<td>').text(result.lymphocytes));
        row.append($('<td>').text("percent"));
        tableBody.append(row);

        row = $('<tr>');
        row.append($('<td>').text('monocytes'));
        row.append($('<td>').text(result.monocytes));
        row.append($('<td>').text("percent"));
        tableBody.append(row);

        row = $('<tr>');
        row.append($('<td>').text('eosinophils'));
        row.append($('<td>').text(result.eosinophils));
        row.append($('<td>').text("percent"));
        tableBody.append(row);

        row = $('<tr>');
        row.append($('<td>').text('basophils'));
        row.append($('<td>').text(result.basophils));
        row.append($('<td>').text("percent"));
        tableBody.append(row);

        row = $('<tr>');
        row.append($('<td>').text('Additional Notes'));
        row.append($('<td>').text(result.additional_note));
        row.append($('<td>').text("N/A"));
        tableBody.append(row);



        
      });
    });
  });
</script>



  
  